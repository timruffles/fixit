This is a web application using golang. Structure:
- web/ # this is all the code for rendering HTML pages and responding to HTTP requests
- engine/ # this is where the business logic lives. Repositories manages the business logic. The ORM lives in engine/ent, the actual logic using it in specific packages under engine/
- cmd/ # binaries for starting up applications

# architecture notes
- Uses Ent ORM with PostgreSQL database
- Primary keys are UUIDv7 (generated by application, not database)
- Authentication via Authboss v3 with custom Ent integration
- Templates use go:embed and web/layouts system with layouts.WithGeneral()
- Authboss routes mounted with http.StripPrefix("/auth", ab.Config.Core.Router)
- Database runs in Docker container via docker-compose.yml
- Integration tests create separate test database (fixit_test)
- POST handlers should be under `api/`, as they're not user-facing.

# coding notes
- the web/layouts package already has header footers, so when writing new templates
  use that rather than defining headers etc
- use the web/handler Wrap function to define high level handlers rather than using the imperative response writer in http package
- Authboss templates should use {{if .errors}} pattern for validation errors
- Auth module imports: _ "github.com/aarondl/authboss/v3/auth" and _ "github.com/aarondl/authboss/v3/register"


- use tailwind for css
- use cobra for clis
- use pkgerrors for returning errors not from other packages in this project (e.g. use `pkgerrors.WithStack(err)` on errors from stdlib or third-party libraries)
- use testify assert for test assertions, and use require to prevent nil pointer exceptions etc (i.e. places the test should halt)
- use table-driven tests tests with > 3 cases, where there's a lot of setup. use multiple calls to test fn and assert results if that's much shorter

- be very sparing with log calls. Use slog
- don't add comments unless they're ncessary. e.g. if intention is not obvious from code, or code has side-effects that should be called out.

# testing notes
- Integration tests in web/integration/ test full HTTP flows
- Use unique timestamps in test data to avoid database conflicts (time.Now().Unix())
- Auth tests should verify both success (redirect to main page) and failure (form re-display with errors)
- Run tests with: go test ./web/integration -v

# useful commands
- Start database: docker-compose up -d
- Run integration tests: go test ./web/integration -v
- Generate Ent code: go generate ./engine/ent
- Run server: go run cmd/server/main.go 